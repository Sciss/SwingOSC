<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.42">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; color: #544f83}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #544f83; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Helvetica; color: #544f83}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Helvetica; color: #544f83; min-height: 13.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica; min-height: 22.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #544f83}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #ad1d13}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #ad1d13}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #bf0000}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #ad1d13; min-height: 14.0px}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; min-height: 16.0px}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #e72619}
p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #606060}
p.p20 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p21 {margin: 0.0px 0.0px 0.0px 10.0px; font: 10.0px Monaco}
p.p22 {margin: 0.0px 0.0px 0.0px 10.0px; font: 10.0px Monaco; min-height: 14.0px}
span.s1 {font: 18.0px Helvetica}
span.s2 {text-decoration: underline}
span.s3 {color: #0019ba}
span.s4 {color: #000000}
span.s5 {color: #2b6f11}
span.s6 {color: #606060}
span.s7 {font: 12.0px Helvetica; color: #544f83}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>SwingOSC – Java-based cross-platform replacements for Cocoa GUI classes</b></p>
<p class="p2"><br></p>
<p class="p3">This class is meant as an emulation of SCUserView. last mod: 02-jul-07 sciss</p>
<p class="p4"><br></p>
<p class="p3"><b>no-op / not working</b></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>different behaviour</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b>refresh<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>unlike cocoa, there is no "natural" refresh, like from resizing or focussing the</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>component, because of the client/server split. however, this makes this implementation</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>much more stringent (IMO). setting a new drawFunc repaints the gadget</p>
<p class="p3"><span class="Apple-tab-span">	</span>view bounds<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>here is no way to paint outside the logical bounds of a swing view, all draw operations</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>are automatically clipped to the view's bounds.</p>
<p class="p4"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><b>extended functionality</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>focusVisible_<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>allows you to switch off the default focus border painting</p>
<p class="p3"><span class="Apple-tab-span">	</span>refreshOnFocus_<span class="Apple-tab-span">	</span>allows you to switch off refreshing as result of focus change</p>
<p class="p4"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><b>known issues / todo</b></p>
<p class="p5"><br></p>
<p class="p6"><span class="s1"><b>JSCUserView<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>user-definable view</b></p>
<p class="p7"><br></p>
<p class="p8"><b>Note: please use the abstraction layer GUI.userView if possible! (see [</b><b><span class="s2">GUI</span></b><b>])</b></p>
<p class="p7"><br></p>
<p class="p8"><b>superclass: JSCView</b></p>
<p class="p7"><br></p>
<p class="p8">JSCUserView is a user-definable View intended mainly for use with JPen and drawHooks.</p>
<p class="p7"><br></p>
<p class="p8">See also: <b>[</b><b><span class="s2">JSCWindow</span></b><b>]</b>, <b>[</b><b><span class="s2">JPen</span></b><b>], [</b><b><span class="s2">Color</span></b><b>]</b>, and <b>[</b><b><span class="s2">String</span></b><b>]</b></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>drawFunc_</b></p>
<p class="p7"><br></p>
<p class="p8">Sets the function which should be evaluated if the view is refreshed.</p>
<p class="p9"><b>Note: </b>This happens when you call userView.refresh.</p>
<p class="p10">//In cocoa GUI, this happens every time the whole window is refreshed (manually by calling JSCWindow-refresh</p>
<p class="p10">//or e.g. by selecting the view or resizing the window).</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p11">(</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="s3">var</span> func;</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>func = { <span class="s3">arg</span> me;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.use {</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>// clipping into the boundingbox</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.addRect( me.bounds );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.clip;</p>
<p class="p14"><br></p>
<p class="p13"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// draw background</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.color = <span class="s3">Color</span>.gray( 0.5 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.moveTo( me.bounds.left @ me.bounds.top );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( (me.bounds.left @ me.bounds.top) +</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space">            </span>(me.bounds.width @ 0) );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( (me.bounds.left @ me.bounds.top) +</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space">            </span>(me.bounds.width @ me.bounds.height) );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( (me.bounds.left @ me.bounds.top ) +</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space">            </span>(0 @ me.bounds.height) );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( me.bounds.left @ me.bounds.top );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.fill;</p>
<p class="p12"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.translate( 100, 100 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do {</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.color = <span class="s3">Color</span>.red( rrand( 0.0, 1 ), rrand( 0.0, 0.5 ));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.addArc( 400.exprand( 2 ) @ 100.rand, rrand( 10, 100 ), 2pi.rand, pi );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.perform([ <span class="s5">\stroke</span>, <span class="s5">\fill</span> ].choose );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p12"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>w = <span class="s3">JSCWindow</span>.new( <span class="s6">"DrawFunc Examples"</span> ).front;</p>
<p class="p11"><span class="Apple-tab-span">	</span>w.view.background_( <span class="s3">Color</span>.white );</p>
<p class="p11"><span class="Apple-tab-span">	</span>3.do { <span class="s3">arg</span> i;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v = <span class="s3">JSCUserView</span>( w, <span class="s3">Rect</span>( 20 + (i * 120), 100, 100, 100 ));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.drawFunc = func;</p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p13">//<span class="Apple-tab-span">	</span>w.refresh;</p>
<p class="p11">)</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s4">v.refresh;<span class="Apple-tab-span">	</span></span>// updates the last created (third) view</p>
<p class="p15"><span class="s4">w.refresh;<span class="Apple-tab-span">	</span></span>// updates all user views in the window</p>
<p class="p16"><br></p>
<p class="p16"><br></p>
<p class="p9"><b>// these only work in SwingOSC:</b></p>
<p class="p13"><span class="s4">v.refreshOnFocus = </span><span class="s3">false</span><span class="s4">; <span class="Apple-converted-space">  </span></span>// do not re-evaluate drawFunc when focus is gained or lost (can be more efficient)</p>
<p class="p13"><span class="s4">v.focusVisible = </span><span class="s3">false</span><span class="s4">;<span class="Apple-converted-space">  </span></span>// don't paint focus border. you can do yourself in the drawFunc, checking for me.hasFocus!</p>
<p class="p17"><br></p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p8"><b>keyDownFunc_</b></p>
<p class="p7"><br></p>
<p class="p18"><b>DEPRECATED! use keyDownAction_ instead! (see [JSCView])</b></p>
<p class="p7"><br></p>
<p class="p8">Sets the function which should be evaluated if the view is in focus and a key is pressed. This function will be passed four arguments: the View, the key pressed as a <b>Char</b>, modifier keys (shift, alt, etc.), and the unicode value. See <b>[</b><b><span class="s2">JSCView</span></b><b>]</b> for more details.</p>
<p class="p7"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p13"><span class="s4"><span class="Apple-tab-span">	</span></span>// select the window, type something and watch the post window</p>
<p class="p19"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = </span><span class="s3">JSCWindow</span><span class="s4">.new( </span>"select this window and type something" <span class="s4">);</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c = <span class="s3">JSCUserView</span>( w, w.view.bounds );</p>
<p class="p13">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c.keyDownFunc = { arg view,char,modifiers,unicode; ... }</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c.keyDownAction = { <span class="s3">arg</span> view, char, modifiers, unicode, keycode;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[char, modifiers, unicode, keycode].postln;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>c.drawFunc = {</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.font<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>= <span class="s3">JFont</span>( <span class="s6">"Helvetica"</span>, 70 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.fillColor<span class="Apple-tab-span">	</span>= <span class="s3">Color</span>.blue( 0.3, 0.5 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.stringAtPoint( char.asString, 180 @ 150 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p13">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.refresh;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front; c.focus;</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p20"><span class="Apple-tab-span">	</span></p>
<p class="p7"><br></p>
<p class="p8"><b>mouseBeginTrackFunc_</b></p>
<p class="p7"><br></p>
<p class="p18"><b>DEPRECATED! use mouseDownAction_ instead! (see [</b><b><span class="s2">JSCView</span></b><b>])</b></p>
<p class="p7"><br></p>
<p class="p8">Sets the function which should be evaluated if the mouse is at the beginning of tracking (mouse-down). This function will be passed four arguments: theView, x coordinate, y coordinate, and keyboard modifiers.</p>
<p class="p7"><br></p>
<p class="p8"><b>mouseTrackFunc_</b></p>
<p class="p7"><br></p>
<p class="p18"><b>DEPRECATED! use mouseMoveAction_ instead! (see [JSCView])</b></p>
<p class="p7"><br></p>
<p class="p8">Sets the function which should be evaluated if the mouse is tracked. This function will be passed four arguments: theView, x coordinate, y coordinate, and keyboard modifiers.</p>
<p class="p7"><br></p>
<p class="p8"><b>mouseEndTrackFunc_</b></p>
<p class="p7"><br></p>
<p class="p18"><b>DEPRECATED! use mouseUpAction_ instead! (see [JSCView])</b></p>
<p class="p7"><br></p>
<p class="p8">Sets the function which should be evaluated if the mouse is at the end of tracking (mouse-up). This function will be passed four arguments: theView, x coordinate, y coordinate, and keyboard modifiers.</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p11">(</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="s3">var</span> drawFunc, beginTrackFunc, endTrackFunc, trackFunc, sat = 0, absX;</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>drawFunc = { <span class="s3">arg</span> me;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.use {</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>// clipping into the boundingbox</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.addRect( me.bounds );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.clip;</p>
<p class="p12"><br></p>
<p class="p13"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// draw background</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.color = <span class="s3">Color</span>.gray( sat );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.moveTo( me.bounds.left @ me.bounds.top );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( (me.bounds.left @ me.bounds.top) +</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space">            </span>(me.bounds.width @ 0) );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( (me.bounds.left @ me.bounds.top) +</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space">            </span>(me.bounds.width @ me.bounds.height) );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( (me.bounds.left @ me.bounds.top ) +</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space">            </span>(0 @ me.bounds.height) );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( me.bounds.left @ me.bounds.top );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.fill;</p>
<p class="p12"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.translate( 100, 100 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do {</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.color = <span class="s3">Color</span>.red( rrand( 0.0, 1 ), rrand( 0.0, 0.5 ));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.addArc( 400.exprand( 2 ) @ 100.rand, rrand( 10, 100 ), 2pi.rand, pi );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.perform([ <span class="s5">\stroke</span>, <span class="s5">\fill</span> ].choose );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p11"><span class="Apple-tab-span">	</span>beginTrackFunc = { <span class="s3">arg</span> me, x, y, mod;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>absX = x;</p>
<p class="p19"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>postf( </span>"begin path: x=%\n"<span class="s4">, absX );</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p11"><span class="Apple-tab-span">	</span>endTrackFunc = { <span class="s3">arg</span> me, x, y, mod;</p>
<p class="p19"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>postf( </span>"end path: (absX-x)=%\n"<span class="s4">, (absX - x));</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p11"><span class="Apple-tab-span">	</span>trackFunc = { <span class="s3">arg</span> me, x, y, mod;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sat = (absX - x) / 100;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>me.refresh;</p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p12"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>w = <span class="s3">JSCWindow</span>.new.front;</p>
<p class="p11"><span class="Apple-tab-span">	</span>w.view.background_(<span class="s3">Color</span>.white);</p>
<p class="p11"><span class="Apple-tab-span">	</span>3.do{ <span class="s3">arg</span> i;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v = <span class="s3">JSCUserView</span>( w, <span class="s3">Rect</span>( 20 + (i * 120), 100, 100, 100 ));</p>
<p class="p13"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//v.background_(Color.white); // not affecting anything...</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.drawFunc = drawFunc;</p>
<p class="p13">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.mouseBeginTrackFunc = beginTrackFunc;</p>
<p class="p13">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.mouseEndTrackFunc = endTrackFunc;</p>
<p class="p13">//<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.mouseTrackFunc = trackFunc;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.mouseDownAction = beginTrackFunc;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.mouseUpAction = endTrackFunc;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.mouseMoveAction = trackFunc;</p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p13">//<span class="Apple-tab-span">	</span>w.refresh;</p>
<p class="p11">)</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p13">// draw on the view</p>
<p class="p12"><br></p>
<p class="p13">// <span class="s7"><b>NOTE: </b></span>in swing, do not rely on correct painting</p>
<p class="p13">// when components overlap. components should never overlap.</p>
<p class="p13">// therefore, in this example, we use the drawFunc of the user view</p>
<p class="p13">// and not the window to paint (see SCUserView help for comparison)</p>
<p class="p16"><br></p>
<p class="p13">// <span class="s7"><b>NOTE: </b></span>after some drawing, sclang starts to partially drop</p>
<p class="p13">// OSC packets resulting in illegal drawing commands sent and</p>
<p class="p13">// the dislay to flicker</p>
<p class="p16"><br></p>
<p class="p21">(</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="s3">var</span> w, txt, tmppoints, all;</p>
<p class="p21"><span class="Apple-tab-span">	</span>tmppoints = [];</p>
<p class="p22"><span class="Apple-tab-span">	</span></p>
<p class="p21"><span class="Apple-tab-span">	</span>w = <span class="s3">JSCWindow</span>( <span class="s6">"draw on me"</span>, <span class="s3">Rect</span>( 128, 64, 340, 360 ));</p>
<p class="p21"><span class="Apple-tab-span">	</span>v = <span class="s3">JSCUserView</span>( w, <span class="s3">Rect</span>( 0, 0, 340, 360 ))</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.canFocus_( false )</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.mouseTrackFunc_({ <span class="s3">arg</span> v,x,y;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tmppoints = tmppoints.add( x @ y );</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.refresh;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>})</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.mouseEndTrackFunc_({<span class="s3">|v,x,y|</span></p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>all = all.add(tmppoints.copy);</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tmppoints = [];</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.refresh;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>})</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.drawFunc_({</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.use {<span class="Apple-tab-span">	</span></p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.width = 1;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.beginPath;</p>
<p class="p22"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tmppoints.do { <span class="s3">arg</span> p, i;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( i == 0, {</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.moveTo( p );</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, {</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( p );</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>all.do{ <span class="s3">arg</span> points;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>points.do { <span class="s3">arg</span> p, i;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( i == 0, {</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.moveTo( p );</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, {</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.lineTo( p );</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">JPen</span>.stroke;</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p21"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p22"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p21"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p21">)</p>
</body>
</html>
