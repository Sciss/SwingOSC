<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.42">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; color: #564d85}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #564d85; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Helvetica; color: #564d85}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Helvetica; color: #564d85; min-height: 13.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica; min-height: 22.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 15.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #564d85}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf; min-height: 12.0px}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #bf0000}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Helvetica; min-height: 11.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000; min-height: 12.0px}
span.s1 {font: 18.0px Helvetica}
span.s2 {text-decoration: underline}
span.s3 {font: 9.0px Monaco}
span.s4 {color: #000000}
span.s5 {color: #564d85}
span.s6 {color: #0000bf}
span.s7 {color: #606060}
span.s8 {color: #007300}
span.s9 {font: 10.0px Monaco; color: #0000bf}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>SwingOSC – Java-based cross-platform replacements for Cocoa GUI classes</b></p>
<p class="p2"><br></p>
<p class="p3">This class is meant as an emulation of SCWindow. last mod: 03-feb-07 sciss</p>
<p class="p4"><br></p>
<p class="p3"><b>no-op / not working</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b>alpha<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>only working on mac os x</p>
<p class="p3"><span class="Apple-tab-span">	</span>alwaysOnTop<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>requires java 1.5+</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3"><b>different behaviour</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b>endFullScreen<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>window bounds are restored to previous state</p>
<p class="p3"><span class="Apple-tab-span">	</span>threading<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>methods needn't be called in the app thread</p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b>alpha<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>only works on Mac OS; only changes the transparency of the window</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> background, gadgets themselves are unaffected. also the window<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>titlebar is not affected</p>
<p class="p4"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><b>extended functionality</b></p>
<p class="p3"><span class="Apple-tab-span">	</span>unminimize<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>restores an iconified window to normal state</p>
<p class="p3"><span class="Apple-tab-span">	</span>visible method<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>hides / shows the window</p>
<p class="p4"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><b>known issues / todo</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b>screenBounds<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>- on multi-display systems, this returns the bounds of the _main_ screen</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(cocoa GUI reports the bounds of the screen containing the window</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>that was most recently focused).</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>- screenBounds and vertical positioning is only correct when</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>the SwingOSC class is initialized after the server was booted.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>- otherwise call SwingOSC.retrieveScreenBounds !</p>
<p class="p3"><span class="Apple-tab-span">	</span>findByID<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>not yet implemented</p>
<p class="p5"><b></b><br></p>
<p class="p6"><span class="s1"><b>JSCWindow<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>user interface window</b></p>
<p class="p7"><br></p>
<p class="p8"><b>Note: please use the abstraction layer GUI.window if possible! (see [</b><b><span class="s2">GUI</span></b><b>])</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>*new(name, bounds, resizable, border);</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>bounds</b>: a Rect(</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>distance from left,</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>distance from bottom,</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>width,</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>height</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p8"><span class="Apple-tab-span">	</span><b>*closeAll</b> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>closes all windows</p>
<p class="p8"><span class="Apple-tab-span">	</span><b>*allWindows</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a list of all windows</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><b>fullScreen</b> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fullscreeen mode, no way to close it then. so don't forget the button</p>
<p class="p8"><span class="Apple-tab-span">	</span><b>endFullScreen</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>end the fullscreen mode</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><b>userCanClose_</b> <span class="Apple-tab-span">	</span>if set to false, window is uncloseable</p>
<p class="p8"><span class="Apple-tab-span">	</span><b>close</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>close and dispose the window</p>
<p class="p8"><span class="Apple-tab-span">	</span><b>front</b><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>open the window, bring it to the front.</p>
<p class="p10"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><b>Note</b>: performance is slightly better if 'front' is called <i>after</i> the window has been</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>populated, since when the window was made visible, adding gadgets requires that</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>the layout manager is revalidated for every single gadget</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><b>refresh</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sometimes this has to becalled so the views are updated</p>
<p class="p2"><br></p>
<p class="p8"><span class="s5"><span class="Apple-tab-span">	</span></span><b>alpha_</b><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>tranparency channel value (0...1)</p>
<p class="p8"><span class="Apple-tab-span">	</span><b>bounds_</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>set the bounds to a Rect</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><b>onClose_</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>can be set to a function</p>
<p class="p8"><span class="Apple-tab-span">	</span><b>alwaysOnTop_</b><span class="Apple-tab-span">	</span>make the window appear above all others</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p11">//examples</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p11">//how to add views</p>
<p class="p12">(</p>
<p class="p7"><br></p>
<p class="p12">w = <span class="s6">JSCWindow</span>(<span class="s7">"my name is... panel"</span>, <span class="s6">Rect</span>(128, 64, 340, 360));</p>
<p class="p7"><br></p>
<p class="p12">32.do({ <span class="s6">arg</span> i;</p>
<p class="p12"><span class="Apple-tab-span">	</span>b = <span class="s6">JSCButton</span>(w, <span class="s6">Rect</span>(rrand(20,300),rrand(20,300), 75, 24));</p>
<p class="p12"><span class="Apple-tab-span">	</span>b.states = [[<span class="s7">"Start "</span>++i, <span class="s6">Color</span>.black, <span class="s6">Color</span>.rand],</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s7">"Stop "</span>++i, <span class="s6">Color</span>.white, <span class="s6">Color</span>.red]];</p>
<p class="p12">});</p>
<p class="p7"><br></p>
<p class="p12">w.front;<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p12">)</p>
<p class="p7"><br></p>
<p class="p8"><b>view</b></p>
<p class="p8"><span class="Apple-tab-span">	</span>every window has an JSCTopView instance, which contains all the other views.</p>
<p class="p7"><span class="Apple-tab-span">	</span></p>
<p class="p12">(</p>
<p class="p13"><br></p>
<p class="p11">//var w;</p>
<p class="p12">w = <span class="s6">JSCWindow</span>(<span class="s7">"my name is... nepal"</span>, <span class="s6">Rect</span>(128, 64, 340, 360));</p>
<p class="p7"><br></p>
<p class="p12">w.view.decorator = <span class="s6">FlowLayout</span>(w.view.bounds);</p>
<p class="p12">w.view.background = <span class="s6">Color</span>(0.6,0.8,0.8);</p>
<p class="p11">//w.front;</p>
<p class="p7"><br></p>
<p class="p12">32.do({ <span class="s6">arg</span> i;</p>
<p class="p12"><span class="Apple-tab-span">	</span>b = <span class="s6">JSCButton</span>(w, <span class="s6">Rect</span>(rrand(20,300),rrand(20,300), 75, 24));</p>
<p class="p12"><span class="Apple-tab-span">	</span>b.states = [[<span class="s7">"Start "</span>++i, <span class="s6">Color</span>.black, <span class="s6">Color</span>.rand],</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s7">"Stop "</span>++i, <span class="s6">Color</span>.white, <span class="s6">Color</span>.red]];</p>
<p class="p12">});</p>
<p class="p7"><br></p>
<p class="p12">w.front;<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p12">)</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>iconification / fullscreen</b></p>
<p class="p7"><br></p>
<p class="p12">w.minimize;</p>
<p class="p11"><span class="s4">w.unminimize;<span class="Apple-converted-space">  </span></span>// note: SwingOSC only</p>
<p class="p12">(</p>
<p class="p12">fork {</p>
<p class="p12"><span class="Apple-tab-span">	</span>w.fullScreen;</p>
<p class="p12"><span class="Apple-tab-span">	</span>5.wait;</p>
<p class="p12"><span class="Apple-tab-span">	</span>w.endFullScreen;</p>
<p class="p12">}</p>
<p class="p12">)</p>
<p class="p7"><br></p>
<p class="p8">see section "border argument" below to learn how to make a window without borders (useful in fullscreen mode).</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>*viewPalette</b></p>
<p class="p8"><span class="Apple-tab-span">	</span>show most of what we've got so far</p>
<p class="p13"><br></p>
<p class="p12"><span class="s6">JSCWindow</span>.viewPalette;</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>bounds_(aRect)</b></p>
<p class="p8"><span class="Apple-tab-span">	</span>set the bounds of the window. note that the y coordinate is counted upside down</p>
<p class="p8"><span class="Apple-tab-span">	</span>(zero corresponds to the screen bottom) as in the native cocoa universe.</p>
<p class="p12">(</p>
<p class="p7"><br></p>
<p class="p12">x = <span class="s6">JSCWindow</span>.new;</p>
<p class="p12">x.front;</p>
<p class="p7"><br></p>
<p class="p12">x.bounds_(<span class="s6">Rect</span>(10,10,100,30));</p>
<p class="p7"><br></p>
<p class="p12">)</p>
<p class="p7"><br></p>
<p class="p11">// doesn't apply to SwingOSC:</p>
<p class="p14">//Note that the setting of the bounds doesn't happen until the application finishes its current application event cycle. Thus, if you check the bounds in the same chunk of code, the JSCWindow will not yet have it updated.</p>
<p class="p14">//</p>
<p class="p11">//<span class="Apple-tab-span">	</span>// execute this all at once</p>
<p class="p11">//<span class="Apple-tab-span">	</span>w = SCWindow.new("test");</p>
<p class="p11">//<span class="Apple-tab-span">	</span>w.front;</p>
<p class="p11">//<span class="Apple-tab-span">	</span>w.bounds = Rect(50, 50, 50, 50);</p>
<p class="p11">//<span class="Apple-tab-span">	</span>w.bounds.postln;</p>
<p class="p11">//<span class="Apple-tab-span">	</span>{ w.bounds.postln; nil }.defer(0.1); // next application event cycle</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>setInnerExtent(width,height)</b></p>
<p class="p7"><br></p>
<p class="p8">Changes the size of the window while keeping the top left corner fixed.<span class="Apple-converted-space">  </span>This is the usual desired behavior, but quick draw and Rect have flipped coordinate systems.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>userCanClose_(boolean)</b></p>
<p class="p9"><br></p>
<p class="p8">Set this to true to prevent command-w from closing the window.<span class="Apple-converted-space">  </span>window.close will still close it, and it will still close on recompiling the library.</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p8"><b>border argument</b></p>
<p class="p7"><br></p>
<p class="p11"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s6">JSCWindow</span><span class="s4">.new(border:</span><span class="s6">false</span><span class="s4">).front; </span>//can't be closed, as it has no buttons, also cmd-w not.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">JSCWindow</span>.closeAll;</p>
<p class="p15"><b></b><br></p>
<p class="p15"><br></p>
<p class="p15"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>onClose</b></p>
<p class="p9"><br></p>
<p class="p8"><span class="Apple-tab-span">	</span>gets the current onClose function.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b>onClose_</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b>sets a function that will be evaluated when the window is closed.</p>
<p class="p9"><b></b><br></p>
<p class="p11">//close the window and the synth plays</p>
<p class="p12">(</p>
<p class="p12"><span class="Apple-tab-span">	</span>s.boot;</p>
<p class="p12"><span class="Apple-tab-span">	</span>x = <span class="s6">JSCWindow</span>.new.front;</p>
<p class="p12"><span class="Apple-tab-span">	</span>x.alpha = 0.4;</p>
<p class="p12"><span class="Apple-tab-span">	</span>x.onClose_({ <span class="s6">Synth</span>.new(<span class="s8">\default</span>) });</p>
<p class="p12">)</p>
<p class="p7"><br></p>
<p class="p8"><b>alwaysOnTop_</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b>if <span class="s9">true</span>, the window is always floating on top of all other windows. <span class="s5">requires java 1.5+</span></p>
<p class="p9"><b></b><br></p>
<p class="p11">//close the window and the synth plays</p>
<p class="p12">(</p>
<p class="p12"><span class="Apple-tab-span">	</span>x = <span class="s6">JSCWindow</span>( <span class="s6">nil</span>, <span class="s6">Rect</span>( 400, 400, 420, 40 ), <span class="s6">false</span>, <span class="s6">false</span> );</p>
<p class="p12"><span class="Apple-tab-span">	</span>x.alpha = 1/3;</p>
<p class="p12"><span class="Apple-tab-span">	</span>x.alwaysOnTop = <span class="s6">true</span>;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s6">JSCStaticText</span>( x, <span class="s6">Rect</span>( 10, 10, 400, 30 ))</p>
<p class="p16"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_( </span>"Click+Drag me, I'll stay on top"<span class="s4"> )</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.align_( <span class="s8">\center</span> )</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.font_( <span class="s6">JFont</span>( <span class="s7">"SansSerf"</span>, 24, <span class="s8">1</span> ));</p>
<p class="p12"><span class="Apple-tab-span">	</span>x.front;</p>
<p class="p12">)</p>
<p class="p12">x.close;</p>
<p class="p17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p12"><span class="s6">JSCWindow</span>.closeAll;</p>
</body>
</html>
